!function(a){"use strict";var b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;a.module("ngCoreElements",["ngCoreElementAutocomplete","ngCoreElementButton","ngCoreElementDatepicker","ngCoreElementDropdown","ngCoreElementForm","ngCoreElementModal","ngCoreElementPanel","ngCoreElementTable"]).factory("$service",[function(){var b;return b=function(){function b(){}return b.getByPath=function(b){var c,d,e;return e=b.split("."),d=2===e.length?e[1]:"save",c=a.element(document).injector(),c.get(e[0])[d]},b}()}]).directive("body",["$rootScope","$timeout",function(a,b){return{restrict:"E",link:function(c,d){return d.bind("click",function(c){return b(function(){return a.$broadcast("body.click",{target:c.target})})})}}}]).provider("$urlFor",[function(){return this.routes={},this.set=function(a,b){return this.routes[a]=b},this.$get=function(a){return function(){return{get:function(b){var c;return console.log(a.routes),c=b.split("/"),c.length&&a.routes[c[0]]?(c[0]=a.routes[c[0]],c.join("/")):null!=a.routes[b]?a.routes[b]:null}}}}(this),this}]),Date.prototype.format=function(a){var b,c,d,e,f,g;for(g="",f=Date.replaceChars,c=d=0,e=a.length;e>=0?e>=d:d>=e;c=e>=0?++d:--d)b=a.charAt(c),c-1>=0&&"\\"===a.charAt(c-1)?g+=b:f[b]?g+=f[b].call(this):"\\"!==b&&(g+=b);return g},Date.prototype.formatAsInt=function(a){return parseInt(this.format(a))},Date.replaceChars={shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],longMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],longDays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],d:function(){var a;return a=parseInt(this.getDate(),10),10>a&&(a="0"+a),a},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){var a,b,c;return null!=(a=this.getDate()%10===1&&11!==this.getDate())?a:{st:null!=(b=this.getDate()%10===2&&12!==this.getDate())?b:{nd:null!=(c=this.getDate()%10===3&&13!==this.getDate())?c:{rd:"th"}}}},w:function(){return this.getDay()},z:function(){return Math.ceil((this-new Date(this.getFullYear(),0,1))/864e5)},W:function(){var a;return a=new Date(this.getFullYear(),0,1),Math.ceil(((this-a)/864e5+a.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){var a;return a=parseInt(this.getMonth(),10)+1,10>a&&(a="0"+a),a},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var a;return a=new Date,new Date(a.getFullYear(),a.getMonth(),0).getDate()},L:function(){var a;return a=this.getFullYear(),a%400===0||a%100!==0&&a%4===0},o:function(){var a;return a=new Date(this.valueOf()),a.setDate(a.getDate()-(this.getDay()+6)%7+3),a.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){var a;return null!=(a=this.getHours()<12)?a:{am:"pm"}},A:function(){var a;return null!=(a=this.getHours()<12)?a:{AM:"PM"}},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){var a;return(null!=(a=(this.getHours()%12||12)<10)?a:{0:""})+(this.getHours()%12||12)},H:function(){var a;return(null!=(a=this.getHours()<10)?a:{0:""})+this.getHours()},i:function(){var a;return(null!=(a=this.getMinutes()<10)?a:{0:""})+this.getMinutes()},s:function(){var a;return(null!=(a=this.getSeconds()<10)?a:{0:""})+this.getSeconds()},u:function(){var a,b,c;return a=this.getMilliseconds(),(null!=(b=10>a)?b:{"00":null!=(c=100>a)?c:{0:""}})+a},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){var a,b;return(null!=(a=-this.getTimezoneOffset()<0)?a:{"-":"+"})+(null!=(b=Math.abs(this.getTimezoneOffset()/60)<10)?b:{0:""})+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){var a,b;return(null!=(a=-this.getTimezoneOffset()<0)?a:{"-":"+"})+(null!=(b=Math.abs(this.getTimezoneOffset()/60)<10)?b:{0:""})+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var a,b;return a=this.getMonth(),this.setMonth(0),b=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(a),b},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},Date.prototype.localeFormat=function(a){var b,c,d;c=Date.replaceCharsLocale;for(b in c)d=c[b],a=a.replace(new RegExp(""+b),c[b].call(this));return a},Date.replaceCharsLocale={dd:function(){var a;return a=parseInt(this.getDate(),10),10>a&&(a="0"+a),a},d:function(){return parseInt(this.getDate(),10)},MMM:function(){return Date.replaceChars.shortMonths[this.getMonth()]},MM:function(){var a;return a=parseInt(this.getMonth(),10)+1,10>a&&(a="0"+a),a},yyyy:function(){return this.getFullYear()}},a.module("ngCoreElementAutocomplete",[]).directive("coreAutocomplete",["$service","$timeout","$location","ngCoreAutocomplete",function(a,b,c,d){return{scope:{service:"@",params:"=?",changeUrl:"=?",queryName:"@",paramName:"@",value:"=?",label:"@",lblClass:"@",wrpClass:"@",placeholder:"@",delay:"=?"},restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/autocomplete/autocomplete.html",controller:["$scope","$element",function(e,f){var g,h;if(null==e.service)throw new Error("service should be defined");return null==e.params&&(e.params=d.params),null==e.changeUrl&&(e.changeUrl=d.changeUrl),null==e.queryName&&(e.queryName=d.queryName),null==e.paramName&&(e.paramName=d.paramName),null==e.delay&&(e.delay=d.delay),e.isOpen=!1,e.items=null,g=!1,h=null,e.$watch("search",function(){return g?g=!1:null!=e.search?(null!=h&&b.cancel(h),h=b(function(){var b;return(null!=(b=e.search)?b.length:void 0)?(e.params[e.paramName]=e.search,a.getByPath(e.service)(e.params,function(a){return a.success&&a.items&&a.items.length&&(e.items=a.items),e.isOpen=!0})):(e.isOpen=!1,e.changeUrl?c.search(e.queryName,null):void 0)},e.delay)):void 0}),e.$watch("value",function(){return g=!0,e.search=e.value}),e.$on("body.click",function(a,b){return e.isOpen&&!f[0].contains(b.target)?e.isOpen=!1:void 0}),e.onSearch=function(a){return e.search=a},e.onSelect=function(a){return g=!0,e.isOpen=!1,e.search=a.name,e.changeUrl?c.search(e.queryName,a.id):void 0}}]}}]).provider("ngCoreAutocomplete",function(){this.params={},this.changeUrl=!1,this.queryName="query",this.paramName="query",this.delay=1e3,this.$get=function(a){return function(){return{params:a.params,changeUrl:a.changeUrl,queryName:a.queryName,paramName:a.paramName,delay:a.delay}}}(this)}),a.module("ngCoreElementButton",[]).directive("coreButton",[function(){return{scope:{icon:"@"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/button/button.html"}}]),a.module("ngCoreElementDatepicker",[]).directive("coreDatepicker",["$location","ngCoreDatepicker","$timeout",function(a,c,d){var e,f,g,h,i,j;return i=function(a,b){return b.changeView=!0,b.picker=a,b.picker.setScope(b),b.picker.build()},e=function(){function a(){}return a.prototype.setScope=function(a){this.scope=a},a.prototype.prev=function(){return this.scope.page--,this.build()},a.prototype.next=function(){return this.scope.page++,this.build()},a.prototype.build=function(){},a.prototype.select=function(a){},a.prototype.isShowPageButtons=function(){return!0},a.prototype.isSelected=function(a){return!0},a.prototype.isCurrent=function(a){return!0},a.prototype.getItemClasses=function(a){var b;return b=[],this.isCurrent(a)&&b.push("current"),this.isSelected(a)&&b.push("selected"),b},a.prototype.getType=function(){},a.prototype.getHeaderMonth=function(){return this.scope.current.format(this.scope.headerMonthFormat)},a.prototype.getHeaderYear=function(){return this.scope.current.format(this.scope.headerYearFormat)},a}(),h=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.build=function(){var a,b,c,d,e,f,g,h,i;for(this.startYear=this.scope.now.formatAsInt("Y")+15*(this.scope.page-1),this.endYear=this.startYear+15,f=this.scope.current.formatAsInt("n"),a=this.scope.current.formatAsInt("j"),this.scope.headers=[],this.scope.rows=[],g=[],b=d=0;3>=d;b=++d){for(h={cells:[]},c=e=0;3>=e;c=++e)i=this.startYear+(4*b+c),h.cells.push({name:i,year:i,month:f,day:a});g.push(this.scope.rows.push(h))}return g},c.prototype.isSelected=function(a){return this.scope.current.getFullYear()===a.year},c.prototype.isCurrent=function(a){return this.scope.now.getFullYear()===a.year},c.prototype.select=function(a){return this.scope.page=0,this.scope.current.setFullYear(a.year),i(new g,this.scope)},c.prototype.getType=function(){return"year"},c.prototype.getHeaderMonth=function(){},c.prototype.getHeaderYear=function(){return new Date(this.startYear,1,1).format(this.scope.headerYearFormat)+" - "+new Date(this.endYear,1,1).format(this.scope.headerYearFormat)},c}(e),g=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.build=function(){var a,b,c,d,e,f,g,h,i;for(i=this.scope.current.formatAsInt("Y"),a=this.scope.current.formatAsInt("j"),this.scope.headers=[],this.scope.rows=[],g=[],b=d=0;2>=d;b=++d){for(h={cells:[]},c=e=0;3>=e;c=++e)f=4*b+c,h.cells.push({name:new Date(i,f,a).format("M"),year:i,month:f,day:a});g.push(this.scope.rows.push(h))}return g},c.prototype.getType=function(){return"month"},c.prototype.getHeaderMonth=function(){},c.prototype.isShowPageButtons=function(){return!1},c.prototype.isSelected=function(a){return this.scope.current.getMonth()===a.month},c.prototype.isCurrent=function(a){return this.scope.now.getMonth()===a.month},c.prototype.select=function(a){return this.scope.page=a.month+12*(a.year-this.scope.now.getFullYear())-this.scope.now.getMonth(),i(new f,this.scope)},c}(e),f=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}var e;return b(d,c),d.prototype.build=function(){var a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(this.scope.current=new Date(this.scope.now.getFullYear(),this.scope.now.getMonth()+this.scope.page,this.scope.now.getDate()),f=[],n=new e(this.scope.current,-1),a=new e(this.scope.current),k=new e(this.scope.current,1),a.firstDayMonth!==this.scope.startDay)for(c=h=p=this.scope.startDay,q=n.lastDayMonth;q>=p?q>=h:h>=q;c=q>=p?++h:--h)f.push(this.createItem(n.date.getFullYear(),n.date.getMonth(),n.daysCount-n.lastDayMonth+c));for(c=i=1,r=a.daysCount;r>=1?r>=i:i>=r;c=r>=1?++i:--i)f.push(this.createItem(a.date.getFullYear(),a.date.getMonth(),c));for(w=Math.ceil(f.length/7),c=j=0,s=7*w-f.length;s>=0?s>=j:j>=s;c=s>=0?++j:--j)k.date.setDate(c+1),f.push(this.createItem(k.date.getFullYear(),k.date.getMonth(),k.date.getDate()));for(this.scope.rows=[],d=l=0,t=w-1;t>=0?t>=l:l>=t;d=t>=0?++l:--l){for(v={cells:[]},g=m=0;6>=m;g=++m)v.cells.push(f[7*d+g]);this.scope.rows.push(v)}for(this.scope.headers=[],u=[],d=o=0;6>=o;d=++o)b=new Date(f[d].year,f[d].month,f[d].day),u.push(this.scope.headers.push(b.format("D")));return u},d.prototype.createItem=function(a,b,c){return{name:c,year:a,month:b,day:c}},d.prototype.getType=function(){return"day"},d.prototype.isSelected=function(a){return this.scope.current.getFullYear()===a.year&&this.scope.current.getMonth()===a.month&&this.scope.current.getDate()===a.day},d.prototype.isCurrent=function(a){return this.scope.now.getFullYear()===a.year&&this.scope.now.getMonth()===a.month&&this.scope.now.getDate()===a.day},d.prototype.select=function(b){return this.scope.current.getMonth()===b.month&&(this.scope.current.setFullYear(b.year),this.scope.current.setMonth(b.month),this.scope.current.setDate(b.day),this.scope.value=this.scope.current.format(this.scope.format),this.scope.isOpen=!1,this.scope.changeUrl)?a.search(this.scope.queryName,this.scope.value):void 0},d.prototype.getItemClasses=function(a){var b;return b=d.__super__.getItemClasses.call(this,a),this.scope.current.getMonth()!==a.month&&b.push("other-month"),b},e=function(){function a(a,b){this.date=a,null==b&&(b=0),this.date=new Date(this.date.getFullYear(),this.date.getMonth()+b,1),this.daysCount=new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate(),this.firstDayMonth=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay(),this.lastDayMonth=new Date(this.date.getFullYear(),this.date.getMonth(),this.daysCount).getDay()}return a}(),d}(e),j={year:h,month:g,day:f},{scope:{current:"=?",type:"@",queryName:"@",changeUrl:"=?",changeUrlOnStart:"=?",startDay:"=?",headerMonthFormat:"@",headerYearFormat:"@",iconLeft:"@",iconRight:"@",format:"@",label:"@",lblClass:"@"},restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/datepicker/datepicker.html",controller:["$scope","$element",function(b,d){var e;return b.page=0,b.isOpen=!1,b.value=null,b.changeView=!1,b.now=new Date,null==b.type&&(b.type=c.type),null==b.startDay&&(b.startDay=c.startDay),null==b.changeUrl&&(b.changeUrl=c.changeUrl),null==b.changeUrlOnStart&&(b.changeUrlOnStart=c.changeUrlOnStart),null==b.queryName&&(b.queryName=c.queryName),null==b.headerMonthFormat&&(b.headerMonthFormat=c.headerMonthFormat),null==b.headerYearFormat&&(b.headerYearFormat=c.headerYearFormat),null==b.iconLeft&&(b.iconLeft=c.iconLeft),null==b.iconRight&&(b.iconRight=c.iconRight),null==b.format&&(b.format=c.format),null!=b.current?(b.current="string"==typeof b.current?new Date(b.current):void 0,b.value=b.current.format(b.format)):(e=a.search(),null!=e[b.queryName]&&e[b.queryName].length?(b.current=new Date(e[b.queryName]),b.value=b.current.format(b.format)):b.current=new Date(b.now.getFullYear(),b.now.getMonth(),b.now.getDate())),b.open=function(){return b.isOpen=!0},b.selectMonth=function(){return i(new g,b)},b.selectYear=function(){return b.page=0,i(new h,b)},b.$on("body.click",function(a,c){return b.changeView?b.changeView=!1:!b.isOpen||b.changeView||d[0].contains(c.target)?void 0:b.isOpen=!1}),j[b.type]?i(new j[b.type],b):void 0}]}}]).provider("ngCoreDatepicker",function(){this.type="day",this.startDay=1,this.changeUrl=!1,this.changeUrlOnStart=!1,this.queryName="datepicker",this.headerMonthFormat="F",this.headerYearFormat="Y",this.iconLeft="glyphicon glyphicon-chevron-left",this.iconRight="glyphicon glyphicon-chevron-right",this.format="Y-m-d",this.$get=function(a){return function(){return{type:a.type,startDay:a.startDay,changeUrl:a.changeUrl,changeUrlOnStart:a.changeUrlOnStart,queryName:a.queryName,headerMonthFormat:a.headerMonthFormat,headerYearFormat:a.headerYearFormat,iconLeft:a.iconLeft,iconRight:a.iconRight,format:a.format}}}(this)}),a.module("ngCoreElementDropdown",[]).directive("coreDropdown",["$location","$rootScope","$timeout","ngCoreDropdown",function(a,b,c,d){return{scope:{items:"=",selected:"=?",name:"@",queryName:"@",label:"@",lblClass:"@",selectEvent:"@",changeUrl:"=?",changeUrlOnStart:"=?",wrpClass:"@",btnClass:"@",hasAny:"=?",anyName:"@",align:"@"},restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/dropdown/dropdown.html",controller:["$scope","$element",function(e,f){var g,h,i,j;return g="__ANY__",e.isOpen=!1,null==e.changeUrl&&(e.changeUrl=d.changeUrl),null==e.changeUrlOnStart&&(e.changeUrlOnStart=d.changeUrlOnStart),null==e.queryName&&(e.queryName=d.queryName),null==e.selectEvent&&(e.selectEvent=d.selectEvent),null==e.hasAny&&(e.hasAny=d.hasAny),null==e.anyName&&(e.anyName=d.anyName),null==e.align&&(e.align=d.align),e.open=function(){return e.isOpen=e.isOpen?!1:!0},e.select=function(c){return e.isOpen=!1,e.selected=c,b.$broadcast(e.selectEvent,e.selected),e.changeUrl===!0&&e.changeUrlOnStart===!0&&c.id!==g&&a.search(e.queryName,e.selected.id),e.changeUrl===!0&&e.changeUrlOnStart===!0&&c.id===g?a.search(e.queryName,null):void 0},e.selectById=function(a){var b,c,d,f;d=e.items,f=[];for(b in d)c=d[b],f.push(c.id===a?e.select(c):void 0);return f},e.$watch("items",function(a,b){return a!==b?j():void 0}),e.$watch("selected",function(a,b){return a!==b&&e.selected?e.select(e.selected):void 0}),e.$on("body.click",function(a,b){return e.isOpen&&!f[0].contains(b.target)?e.isOpen=!1:void 0}),h=function(){return null!=e.items},i=function(){var b;return b=a.search(),null!=e.selected?e.select(e.selected):null!=e.queryName&&null!=b[e.queryName]?e.selectById(parseInt(b[e.queryName])):e.select(e.items[0]),h()?e.changeUrlOnStart=!0:void 0},j=function(){return e.hasAny?c(function(){return e.items.unshift({id:g,name:e.anyName}),i()}):i()},h()?j():void 0}]}}]).provider("ngCoreDropdown",function(){this.changeUrl=!1,this.changeUrlOnStart=!1,this.queryName="dropdown",this.selectEvent="dropdown.select",this.hasAny=!1,this.anyName="Любой",this.align="left",this.$get=function(a){return function(){return{changeUrl:a.changeUrl,changeUrlOnStart:a.changeUrlOnStart,queryName:a.queryName,selectEvent:a.selectEvent,hasAny:a.hasAny,anyName:a.anyName,align:a.align}}}(this)}),a.module("ngCoreElementForm",[]).directive("coreForm",["$window","$service","ngCoreForm",function(a,b,c){return{scope:{service:"@",cleanAfterSend:"=?",successRedirect:"@",successEvent:"@",beforeSendEvent:"@",sendEvent:"@",receiveEvent:"@",errorEvent:"@"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/form/form.html",controller:["$scope",function(d){var e,f;if(null==d.service)throw new Error("service should be defined");return null==d.cleanAfterSend&&(d.cleanAfterSend=c.cleanAfterSend),null==d.successEvent&&(d.successEvent=c.successEvent),null==d.sendEvent&&(d.sendEvent=c.sendEvent),null==d.receiveEvent&&(d.receiveEvent=c.receiveEvent),null==d.errorEvent&&(d.errorEvent=c.errorEvent),d.cleanAfterSendEvent=c.cleanAfterSendEvent,d.error=null,e={},e[d.successEvent]={},e[d.sendEvent]={},e[d.receiveEvent]={},e[d.errorEvent]={},e[d.cleanAfterSendEvent]={},f=function(a,b){var c,d,f,g;f=e[a],g=[];for(c in f)d=f[c],g.push(d(b));return g},this.addListener=function(a,b,c){return null==e[a][b]?e[a][b]=c:void 0},this.getSuccessEvent=function(){return d.successEvent},this.getSendEvent=function(){return d.sendEvent},this.getReceiveEvent=function(){return d.receiveEvent},this.getErrorEvent=function(){return d.errorEvent},this.getCleanAfterSendEvent=function(){return d.cleanAfterSendEvent},this.send=function(){var c;return c={},f(d.sendEvent,c),d.$emit(d.sendEvent,c),b.getByPath(d.service)(c,function(b){var c,e,g;if(f(d.receiveEvent,b),d.$emit(d.receiveEvent,b),b.success===!0){if(f(d.successEvent,b),d.$emit(d.successEvent,b),d.cleanAfterSend===!0&&d.$broadcast(d.cleanAfterSendEvent,b),null!=d.successRedirect)return a.location.href=d.successRedirect}else if(d.$emit(d.errorEvent,b),null!=b.message&&(d.error=b.message),null!=b.messages)return f(d.errorEvent,b),e=function(){var a,d;a=b.messages,d=[];for(g in a)c=a[g],d.push("<div class="+g+">"+c.message+"</div>");return d}(),d.error=e.join("")})}}],link:function(a,b,c,d){return b.bind("submit",function(a){return a.preventDefault(),d.send()})}}}]).provider("ngCoreForm",function(){this.cleanAfterSend=!0,this.successEvent="form.success",this.sendEvent="form.send",this.receiveEvent="form.receive",this.errorEvent="form.error",this.cleanAfterSendEvent="form.clean",this.$get=function(a){return function(){return{cleanAfterSend:a.cleanAfterSend,successEvent:a.successEvent,sendEvent:a.sendEvent,receiveEvent:a.receiveEvent,errorEvent:a.errorEvent,cleanAfterSendEvent:a.cleanAfterSendEvent}}}(this)}).directive("coreInput",[function(){return{scope:{type:"@",name:"@",value:"=?",label:"@",lblClass:"@",placeholder:"@",wrpClass:"@"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a,b){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-input.html":"/angular-core-elements/src/form/input.html"},link:function(b,c,d,e){var f,g;return null==b.type&&(b.type="text"),f=a.element(c[0].querySelector("input")),g=f.parent(),e.addListener(e.getSendEvent(),b.name,function(a){if(f&&b.name)if(g.removeClass("has-error"),"checkbox"===b.type||"radio"===b.type){if(f.val())return a[f.attr("name")]=f.val()}else if(f.val())return a[f.attr("name")]=f.val()}),b.$on(e.getErrorEvent(),function(a,c){return c.messages[b.name]?g.addClass("has-error"):void 0}),b.$on(e.getCleanAfterSendEvent(),function(){return"text"===b.type?f.val(""):void 0})}}}]).directive("coreHiddenInput",[function(){return{scope:{name:"@",value:"=?"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/form/hidden-input.html",link:function(a,b,c,d){if(null==a.name)throw new Error("name should be defined");return d.addListener(d.getSendEvent(),a.name,function(b){return a.value?b[a.name]=a.value:void 0})}}}]).directive("coreSubmit",["ngCoreSubmit",function(b){return{scope:{btnClass:"@",wrpClass:"@"},require:"^coreForm",restrict:"E",replace:!0,transclude:!0,templateUrl:function(a,b){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-submit.html":"/angular-core-elements/src/form/submit.html"},link:function(c,d,e,f){var g;return null==c.btnClass&&(c.btnClass=b.btnClass),g=a.element(d[0].querySelector("button")),f.addListener(f.getSendEvent(),"submit",function(){return g.addClass("disabled")}),f.addListener(f.getReceiveEvent(),"submit",function(){return g.removeClass("disabled")[0].blur()})}}}]).provider("ngCoreSubmit",function(){var a;return a="btn-success",this.$get=function(){return{btnClass:a}},this}).directive("coreSelect",[function(){return{scope:{name:"@",label:"@",lblClass:"@",wrpClass:"@",items:"=",selected:"=?",selectedId:"=?",anyName:"@"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a,b){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-select.html":"/angular-core-elements/src/form/select.html"},link:function(a,b,c,d){var e;if(null==a.name)throw new Error("name should be defined");return a.selectEvent=a.name+".dropdown.select",null==a.anyName&&(a.anyName="Выбрать"),e=0,a.$watch("selected",function(b,c){return null!=b?a.$$childHead.select(a.selected):void 0}),a.$watch("selectedId",function(b,c){return null!=b?a.$$childHead.selectById(a.selectedId):void 0}),a.$on(a.selectEvent,function(a,b){return e=null!=b?b.id:void 0}),d.addListener(d.getSendEvent(),a.name,function(b){return b[a.name]=e})}}}]).directive("coreTextarea",[function(){return{scope:{name:"@",value:"=?",label:"@",lblClass:"@",placeholder:"@",wrpClass:"@",rows:"=?",cols:"=?"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a,b){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-textarea.html":"/angular-core-elements/src/form/textarea.html"},link:function(b,c,d,e){var f,g;if(null==b.name)throw new Error("name should be defined");return g=a.element(c[0].querySelector("textarea")),f=g.parent(),e.addListener(e.getSendEvent(),b.name,function(a){return a[b.name]=g.val()}),e.addListener(e.getErrorEvent(),b.name,function(a){return a.messages[b.name]?f.addClass("has-error"):void 0}),e.addListener(e.getCleanAfterSendEvent(),b.name,function(a){return g.val("")})}}}]).directive("coreCheckbox",[function(){return{scope:{name:"@",value:"=?",label:"@",lblClass:"@",placeholder:"@",wrpClass:"@",checked:"=?"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a,b){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-checkbox.html":"/angular-core-elements/src/form/checkbox.html"},link:function(a,b,c,d){if(null==a.name)throw new Error("name should be defined");return d.addListener(d.getSendEvent(),a.name,function(b){return a.checked?b[a.name]=a.value:void 0})}}}]),a.module("ngCoreElementModal",[]).directive("coreModal",[function(){return{scope:{animation:"@",title:"@",submitText:"@",autoOpen:"=?",opener:"@",openerEvent:"@",model:"=?"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/modal/modal.html",controller:["$scope",function(b){return null==b.animation&&(b.animation="fade"),null==b.autoOpen&&(b.autoOpen=!1),b.isOpen=b.autoOpen===!0?!0:!1,null==b.openerEvent&&(b.openerEvent="click"),b.model=this,b.open=this.show=function(){return b.isOpen=!0},b.close=this.hide=function(){return b.isOpen=!1},b.submit=b.close,null!=b.opener&&b.opener.length?a.element(document.querySelector(b.opener)).bind(b.openerEvent,function(){return b.open()}):void 0}]}}]),a.module("ngCoreElementPanel",[]).directive("corePanel",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/panel/panel.html"}}]).directive("corePanelHeader",["$timeout","$location","$rootScope",function(a,b,c){return{scope:{hasSearch:"=?",changeUrl:"=?",queryName:"@",delay:"=?",searchEvent:"@",placeholder:"@"},require:"^corePanel",restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/panel/panel-header.html",controller:["$scope",function(d){var e,f;return d.search=null,null==d.queryName&&(d.queryName="search"),null==d.changeUrl&&(d.changeUrl=!0),null==d.hasSearch&&(d.hasSearch=!1),null==d.delay&&(d.delay=1e3),null==d.searchEvent&&(d.searchEvent="panel.header.search"),e=null,d.$watch("search",function(){return null!=d.search?(null!=e&&a.cancel(e),e=a(function(){return c.$broadcast(d.searchEvent,d.search),d.search.length||(d.search=null),d.changeUrl?(b.search(d.queryName,d.search),b.search("page",null)):void 0},d.delay)):void 0}),d.onChange=function(a){return d.search=a},f=b.search(),null!=f[d.queryName]?d.search=f[d.queryName]:void 0}]}}]),a.module("ngCoreElementTable",[]).directive("coreTable",["$rootScope","$location",function(a,b){return{scope:{pageQueryName:"@",items:"=?",itemsPerPage:"=?",itemsCount:"=?",currentPage:"=?",displayedPages:"=?",changeUrl:"=?",changeUrlOnStart:"=?",itemsNotFound:"@",paginationEvent:"@"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/table/table.html",controller:["$scope","$element","$attrs",function(c,d,e){var f,g;for(c.cells=[],c.cellElements=[],null==c.pageQueryName&&(c.pageQueryName="page"),null==c.paginationEvent&&(c.paginationEvent="page.select"),null==c.itemsPerPage&&(c.itemsPerPage=0),null==c.itemsCount&&(c.itemsCount=0),null==c.currentPage&&(c.currentPage=1),null==c.displayedPages&&(c.displayedPages=5),null==c.changeUrl&&(c.changeUrl=!1),null==c.changeUrl&&(c.changeUrlOnStart=!1),null==c.itemsNotFound&&(c.itemsNotFound="Нет данных для отображения"),f=c,c.$on("pagination",function(a,b){return c.itemsPerPage=b.itemsPerPage,c.itemsCount=b.itemsCount,c.createPages()}),c.selectPage=function(d){return c.currentPage=d,c.createPages(),c.changeUrl===!0&&c.changeUrlOnStart===!0&&b.search(c.pageQueryName,c.currentPage),a.$broadcast(c.paginationEvent,c.currentPage)},c.createPages=function(){var a,b,d,e,f,g,h,i;for(c.pages=[],h=Math.max(1,c.currentPage-Math.abs(Math.floor(c.displayedPages/2))),a=h+c.displayedPages-1,i=Math.ceil(c.itemsCount/c.itemsPerPage),a>i&&(a=i,h=Math.max(1,a-c.displayedPages+1)),h>a&&(a=h),g=[],b=d=e=h,f=a;f>=e?f>=d:d>=f;b=f>=e?++d:--d)g.push(c.pages.push(b));return g},this.add=function(a){return c.cells.push(a)},this.getCollectionName=function(){return e.items},this.getParentScope=function(){return f};null!==f&&!f.hasOwnProperty(this.getCollectionName());)f=f.$parent;return g=b.search(),null!=g[c.pageQueryName]&&(c.currentPage=parseInt(g[c.pageQueryName])),c.itemsCount&&c.itemsPerPage&&c.selectPage(c.currentPage),c.changeUrlOnStart=!0,f.$watch(this.getCollectionName(),function(a){return function(b,d,e){return null!=e[a.getCollectionName()]&&c.items!==e[a.getCollectionName()]?c.items=e[a.getCollectionName()]:void 0}}(this),!0)}]}}]).directive("coreCol",[function(){return{scope:{name:"@","class":"@"},restrict:"E",require:"^coreTable",compile:function(a,b){var c;return c=a.html(),function(a,b,d,e){return a.content=c,e.add(a)}}}}]).directive("coreCell",["compileCell",function(a){return{restrict:"A",require:"^coreTable",replace:!0,link:function(b,c,d,e){return a(c,b.cell.content,e.getCollectionName()+"["+b.$parent.i+"]",e.getParentScope())}}}]).directive("coreDetails",[function(){return{scope:{item:"="},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/table/details.html",controller:["$scope","$element","$attrs",function(a,b,c){var d,e;for(a.rows=[],d=a,this.add=function(b){return a.rows.push(b)},this.getCollectionName=function(){return c.item},this.getParentScope=function(){return d},e=[];null!==d&&!d.hasOwnProperty(this.getCollectionName());)e.push(d=d.$parent);return e}]}}]).directive("coreRow",[function(){return{scope:{name:"@","class":"@",lblClass:"@",wrpClass:"@"},restrict:"E",require:"^coreDetails",compile:function(a,b){var c;return c=a.html(),function(a,b,d,e){return null==a.lblClass&&(a.lblClass="col-sm-2"),a.content=c,e.add(a)}}}}]).directive("coreCompileRow",["compileCell",function(a){return{restrict:"A",require:"^coreDetails",link:function(b,c,d,e){return a(c,b.row.content,e.getCollectionName(),e.getParentScope())}}}]).factory("compileCell",["$compile",function(a){return function(b,c,d,e){var f;return f=new RegExp("item(?!s)","g"),b.append(c.replace(f,d)),a(b.contents())(e)}}]),a.module("ngCoreElements").run(["$templateCache",function(a){a.put("/angular-core-elements/src/autocomplete/autocomplete.html",'<div class="form-group autocomplete" >\n    <label class="control-label" ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="autocomplete-group {{wrpClass}}" ng-class="{open: isOpen}">\n        <input type="text"\n               ng-model="search"\n               ng-change="onChange(search)"\n               class="form-control"\n               placeholder="{{placeholder}}"/>\n        <ul class="dropdown-menu {{align}}" role="menu">\n            <li ng-repeat="item in items">\n                <a ng-href="#" ng-click="$event.preventDefault();onSelect(item)">{{item.name}}</a>\n            </li>\n        </ul>\n    </div>\n</div>'),a.put("/angular-core-elements/src/button/button.html",'<button type="button" class="btn">\n    <span ng-if="icon" class="{{icon}}" aria-hidden="true"></span>\n    <span ng-transclude></span>\n</button>'),a.put("/angular-core-elements/src/datepicker/datepicker.html",'<div class="datepicker {{picker.getType()}}">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="datepicker-group">\n        <input type="text"\n               class="form-control"\n               ng-click="event.preventDefault();open()"\n               value="{{value}}"/>\n        <div class="datepicker-popover" ng-show="isOpen">\n            <div class="datepicker-btns">\n                <core-button ng-click="event.preventDefault();picker.prev()"\n                             ng-show="picker.isShowPageButtons()"\n                             icon="{{iconLeft}}"></core-button>\n                <div class="datepicker-header">\n                    <core-button ng-click="event.preventDefault();selectMonth()">{{picker.getHeaderMonth()}}</core-button>\n                    <core-button ng-click="event.preventDefault();selectYear()">{{picker.getHeaderYear()}}</core-button>\n                </div>\n                <core-button ng-click="event.preventDefault();picker.next()"\n                             ng-show="picker.isShowPageButtons()"\n                             icon="{{iconRight}}"></core-button>\n            </div>\n            <table class="datepicker-table">\n                <thead ng-if="headers.length">\n                    <tr>\n                        <th ng-repeat="header in headers">{{header}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="row in rows">\n                        <td ng-repeat="cell in row.cells">\n                            <core-button ng-click="event.preventDefault();picker.select(cell)"\n                                         ng-class="picker.getItemClasses(cell)">{{cell.name}}</core-button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),
a.put("/angular-core-elements/src/dropdown/dropdown.html",'<div ng-class="{\'form-group\': name.length, \'dropdown-wrapper\': !name.length}">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="btn-group {{wrpClass}}" ng-class="{open: isOpen}">\n        <button type="button"\n                class="btn btn-default dropdown-toggle {{btnClass}}"\n                data-toggle="dropdown"\n                aria-expanded="false"\n                ng-click="open()">\n            {{selected.name}} <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu {{align}}" role="menu">\n            <li ng-repeat="item in items">\n                <a ng-href="#" ng-click="$event.preventDefault();select(item)">{{item.name}}</a>\n            </li>\n        </ul>\n        <input type="hidden" name="{{name}}" value="{{value}}" ng-if="name"/>\n    </div>\n</div>'),a.put("/angular-core-elements/src/form/checkbox.html",'<div class="form-group">\n    <label class="checkbox-inline {{lblClass}}">\n        <input type="checkbox"\n               name="{{name}}"\n               value="{{value}}"\n               ng-model="checked"/> {{label}}\n    </label>\n</div>'),a.put("/angular-core-elements/src/form/form.html",'<form>\n    <div ng-transclude></div>\n    <div class="error-wrapper" ng-bind-html="error"></div>\n</form>'),a.put("/angular-core-elements/src/form/hidden-input.html",'<span><input type="hidden" name="{{name}}" value="{{value}}"/></span>'),a.put("/angular-core-elements/src/form/input.html",'<div class="form-group">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <input type="{{type}}"\n           name="{{name}}"\n           value="{{value}}"\n           class="form-control"\n           placeholder="{{placeholder}}"/>\n</div>'),a.put("/angular-core-elements/src/form/select.html",'<div class="form-group">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <span>\n        <core-dropdown items="items" select-event="{{selectEvent}}" has-any="true" any-name="{{anyName}}"></core-dropdown>\n        <input type="hidden" name="{{name}}" value="{{value.id}}"/>\n    </span>\n</div>'),a.put("/angular-core-elements/src/form/submit.html",'<div class="form-group">\n    <button ng-transclude\n            class="btn btn-block {{btnClass}}"\n            type="submit"></button>\n</div>\n'),a.put("/angular-core-elements/src/form/textarea.html",'<div class="form-group">\n    <label ng-if="label"\n           class="{{lblClass}}">{{label}}</label>\n    <textarea class="form-control"\n              name="{{name}}"\n              rows="{{rows}}"\n              cols="{{cols}}"\n              placeholder="{{placeholder}}">{{value}}</textarea>\n</div>'),a.put("/angular-core-elements/src/form/wrapped-checkbox.html",'<div class="form-group">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="{{wrpClass}}">\n        <input type="checkbox"\n               name="{{name}}"\n               value="{{value}}"\n               ng-model="checked"/>\n    </div>\n</div>'),a.put("/angular-core-elements/src/form/wrapped-input.html",'<div class="form-group">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="{{wrpClass}}">\n        <input type="{{type}}"\n               name="{{name}}"\n               value="{{value}}"\n               class="form-control"\n               placeholder="{{placeholder}}"/>\n    </div>\n</div>'),a.put("/angular-core-elements/src/form/wrapped-select.html",'<div class="form-group">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="{{wrpClass}}">\n        <core-dropdown items="items" select-event="{{selectEvent}}"></core-dropdown>\n        <input type="hidden" name="{{name}}" value="{{value.id}}"/>\n    </div>\n</div>'),a.put("/angular-core-elements/src/form/wrapped-submit.html",'<div class="form-group">\n    <div class="{{wrpClass}}">\n        <button ng-transclude\n                class="btn btn-block {{btnClass}}"\n                type="submit"></button>\n    </div>\n</div>\n'),a.put("/angular-core-elements/src/form/wrapped-textarea.html",'<div class="form-group">\n    <label ng-if="label" class="{{lblClass}}">{{label}}</label>\n    <div class="{{wrpClass}}">\n        <textarea class="form-control"\n                  name="{{name}}"\n                  rows="{{rows}}"\n                  cols="{{cols}}"\n                  placeholder="{{placeholder}}">{{value}}</textarea>\n    </div>\n</div>'),a.put("/angular-core-elements/src/modal/modal.html",'<div>\r\n    <div class="modal {{animation}}" ng-class="{\'show in\': isOpen}">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button"\r\n                            class="close"\r\n                            data-dismiss="modal"\r\n                            aria-label="Close"\r\n                            ng-click="close()">\r\n                        <span aria-hidden="true">&times;</span>\r\n                    </button>\r\n                    <h4 class="modal-title">{{title}}</h4>\r\n                </div>\r\n                <div class="modal-body" ng-transclude></div>\r\n                <!--<div class="modal-footer">-->\r\n                    <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->\r\n                    <!--<button type="button" class="btn btn-primary">Save changes</button>-->\r\n                <!--</div>-->\r\n                <div class="modal-footer">\r\n                    <button class="btn btn btn-primary pull-right" ng-click="close()">Ок</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-backdrop {{animation}}"\r\n         ng-class="{\'show in\': isOpen}"\r\n         ng-if="isOpen"\r\n         ng-click="close()"></div>\r\n</div>'),a.put("/angular-core-elements/src/panel/panel-header.html",'<div class="panel-heading clearfix">\n    <h4 ng-transclude class="pull-left"></h4>\n    <div class="pull-left search" ng-if="hasSearch">\n        <input type="text"\n               ng-model="search"\n               ng-change="onChange(search)"\n               class="form-control"\n               placeholder="{{placeholder}}"/>\n    </div>\n</div>'),a.put("/angular-core-elements/src/panel/panel.html",'<div class="panel panel-default" ng-transclude></div>'),a.put("/angular-core-elements/src/table/details.html",'<div class="details form-horizontal">\n    <div class="details-hidden" ng-transclude></div>\n    <div class="form-group" ng-repeat="row in rows">\n        <label class="{{row.lblClass}} control-label">{{row.name}}</label>\n        <div class="{{row.wrpClass}}">\n            <p class="form-control-static" core-compile-row></p>\n        </div>\n    </div>\n</div>'),a.put("/angular-core-elements/src/table/table.html",'<table class="table">\n    <colgroup ng-transclude></colgroup>\n    <thead>\n        <tr>\n            <th class="text-center {{cell.class}}" ng-repeat="cell in cells">{{cell.name}}</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat="(i, item) in items" class="table-row {{i}}">\n            <td class="table-cell {{j}} {{cell.class}}"\n                ng-repeat="(j, cell) in cells"\n                core-cell></td>\n        </tr>\n        <tr ng-show="!items.length">\n            <td class="items-not-found" colspan="{{cells.length}}">{{itemsNotFound}}</td>\n        </tr>\n    </tbody>\n    <tfoot ng-show="pages.length > 1 && items.length">\n        <tr>\n            <td colspan="{{cells.length}}" class="table-pagination">\n                <ul class="pagination">\n                    <li ng-repeat="page in pages" ng-class="{active: page == currentPage}">\n                        <a href="#" ng-click="$event.preventDefault();selectPage(page)">{{page}}</a>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n    </tfoot>\n</table>\n')}])}(window.angular);