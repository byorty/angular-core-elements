!function(a){"use strict";var b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;a.module("ngCoreElements",["ngCoreElementButton","ngCoreElementDatepicker","ngCoreElementDropdown","ngCoreElementForm","ngCoreElementModal","ngCoreElementPanel","ngCoreElementTable"]).factory("$service",[function(){var b;return b=function(){function b(){}return b.getByPath=function(b){var c,d,e;return e=b.split("."),d=2===e.length?e[1]:"save",c=a.element(document).injector(),c.get(e[0])[d]},b}()}]),Date.prototype.format=function(a){var b,c,d,e,f,g;for(g="",f=Date.replaceChars,c=d=0,e=a.length;e>=0?e>=d:d>=e;c=e>=0?++d:--d)b=a.charAt(c),c-1>=0&&"\\"===a.charAt(c-1)?g+=b:f[b]?g+=f[b].call(this):"\\"!==b&&(g+=b);return g},Date.prototype.formatAsInt=function(a){return parseInt(this.format(a))},Date.replaceChars={shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],longMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],longDays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],d:function(){var a;return a=parseInt(this.getDate(),10),10>a&&(a="0"+a),a},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){var a,b,c;return null!=(a=this.getDate()%10===1&&11!==this.getDate())?a:{st:null!=(b=this.getDate()%10===2&&12!==this.getDate())?b:{nd:null!=(c=this.getDate()%10===3&&13!==this.getDate())?c:{rd:"th"}}}},w:function(){return this.getDay()},z:function(){return Math.ceil((this-new Date(this.getFullYear(),0,1))/864e5)},W:function(){var a;return a=new Date(this.getFullYear(),0,1),Math.ceil(((this-a)/864e5+a.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){var a;return a=parseInt(this.getMonth(),10)+1,10>a&&(a="0"+a),a},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var a;return a=new Date,new Date(a.getFullYear(),a.getMonth(),0).getDate()},L:function(){var a;return a=this.getFullYear(),a%400===0||a%100!==0&&a%4===0},o:function(){var a;return a=new Date(this.valueOf()),a.setDate(a.getDate()-(this.getDay()+6)%7+3),a.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){var a;return null!=(a=this.getHours()<12)?a:{am:"pm"}},A:function(){var a;return null!=(a=this.getHours()<12)?a:{AM:"PM"}},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){var a;return(null!=(a=(this.getHours()%12||12)<10)?a:{0:""})+(this.getHours()%12||12)},H:function(){var a;return(null!=(a=this.getHours()<10)?a:{0:""})+this.getHours()},i:function(){var a;return(null!=(a=this.getMinutes()<10)?a:{0:""})+this.getMinutes()},s:function(){var a;return(null!=(a=this.getSeconds()<10)?a:{0:""})+this.getSeconds()},u:function(){var a,b,c;return a=this.getMilliseconds(),(null!=(b=10>a)?b:{"00":null!=(c=100>a)?c:{0:""}})+a},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){var a,b;return(null!=(a=-this.getTimezoneOffset()<0)?a:{"-":"+"})+(null!=(b=Math.abs(this.getTimezoneOffset()/60)<10)?b:{0:""})+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){var a,b;return(null!=(a=-this.getTimezoneOffset()<0)?a:{"-":"+"})+(null!=(b=Math.abs(this.getTimezoneOffset()/60)<10)?b:{0:""})+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var a,b;return a=this.getMonth(),this.setMonth(0),b=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(a),b},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},Date.prototype.localeFormat=function(a){var b,c,d;c=Date.replaceCharsLocale;for(b in c)d=c[b],a=a.replace(new RegExp(""+b),c[b].call(this));return a},Date.replaceCharsLocale={dd:function(){var a;return a=parseInt(this.getDate(),10),10>a&&(a="0"+a),a},d:function(){return parseInt(this.getDate(),10)},MMM:function(){return Date.replaceChars.shortMonths[this.getMonth()]},MM:function(){var a;return a=parseInt(this.getMonth(),10)+1,10>a&&(a="0"+a),a},yyyy:function(){return this.getFullYear()}},a.module("ngCoreElementButton",[]).directive("coreButton",[function(){return{scope:{icon:"@"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/button/button.html"}}]),a.module("ngCoreElementDatepicker",[]).directive("coreDatepicker",["$location",function(a){var c,d,e,f,g,h;return g=function(a,b){return b.picker=a,b.picker.setScope(b),b.picker.build()},c=function(){function a(){}return a.prototype.setScope=function(a){this.scope=a},a.prototype.prev=function(){return this.scope.page--,this.build()},a.prototype.next=function(){return this.scope.page++,this.build()},a.prototype.build=function(){},a.prototype.select=function(){},a.prototype.isShowPageButtons=function(){return!0},a.prototype.isSelected=function(){return!0},a.prototype.isCurrent=function(){return!0},a.prototype.getItemClasses=function(a){var b;return b=[],this.isCurrent(a)&&b.push("current"),this.isSelected(a)&&b.push("selected"),b},a.prototype.getType=function(){},a.prototype.getHeaderMonth=function(){return this.scope.current.format(this.scope.headerMonthFormat)},a.prototype.getHeaderYear=function(){return this.scope.current.format(this.scope.headerYearFormat)},a}(),f=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.build=function(){var a,b,c,d,e,f,g,h,i;for(this.startYear=this.scope.now.formatAsInt("Y")+15*(this.scope.page-1),this.endYear=this.startYear+15,f=this.scope.current.formatAsInt("n"),a=this.scope.current.formatAsInt("j"),this.scope.headers=[],this.scope.rows=[],g=[],b=d=0;3>=d;b=++d){for(h={cells:[]},c=e=0;3>=e;c=++e)i=this.startYear+(4*b+c),h.cells.push({name:i,year:i,month:f,day:a});g.push(this.scope.rows.push(h))}return g},c.prototype.isSelected=function(a){return this.scope.current.getFullYear()===a.year},c.prototype.isCurrent=function(a){return this.scope.now.getFullYear()===a.year},c.prototype.select=function(a){return this.scope.page=0,this.scope.current.setFullYear(a.year),g(new e,this.scope)},c.prototype.getType=function(){return"year"},c.prototype.getHeaderMonth=function(){},c.prototype.getHeaderYear=function(){return new Date(this.startYear,1,1).format(this.scope.headerYearFormat)+" - "+new Date(this.endYear,1,1).format(this.scope.headerYearFormat)},c}(c),e=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.build=function(){var a,b,c,d,e,f,g,h,i;for(i=this.scope.current.formatAsInt("Y"),a=this.scope.current.formatAsInt("j"),this.scope.headers=[],this.scope.rows=[],g=[],b=d=0;2>=d;b=++d){for(h={cells:[]},c=e=0;3>=e;c=++e)f=4*b+c,h.cells.push({name:new Date(i,f,a).format("M"),year:i,month:f,day:a});g.push(this.scope.rows.push(h))}return g},c.prototype.getType=function(){return"month"},c.prototype.getHeaderMonth=function(){},c.prototype.isShowPageButtons=function(){return!1},c.prototype.isSelected=function(a){return this.scope.current.getMonth()===a.month},c.prototype.isCurrent=function(a){return this.scope.now.getMonth()===a.month},c.prototype.select=function(a){return this.scope.page=a.month-this.scope.now.getMonth(),g(new d,this.scope)},c}(c),d=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}var e;return b(d,c),d.prototype.build=function(){var a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(this.scope.current.setMonth(this.scope.now.getMonth()+this.scope.page),f=[],n=new e(this.scope.current,-1),a=new e(this.scope.current),k=new e(this.scope.current,1),a.firstDayMonth!==this.scope.startDay)if(0===n.lastDayMonth)f.push(this.createItem(n.date.getFullYear(),n.date.getMonth(),n.date.daysCount));else for(c=h=1,p=n.lastDayMonth;p>=1?p>=h:h>=p;c=p>=1?++h:--h)n.date.setDate(n.daysCount-n.lastDayMonth+c),f.push(this.createItem(n.date.getFullYear(),n.date.getMonth(),n.date.getDate()));for(c=i=1,q=a.daysCount;q>=1?q>=i:i>=q;c=q>=1?++i:--i)f.push(this.createItem(a.date.getFullYear(),a.date.getMonth(),c));for(v=Math.ceil(f.length/7),c=j=0,r=7*v-f.length;r>=0?r>=j:j>=r;c=r>=0?++j:--j)k.date.setDate(c+1),f.push(this.createItem(k.date.getFullYear(),k.date.getMonth(),k.date.getDate()));for(this.scope.rows=[],d=l=0,s=v-1;s>=0?s>=l:l>=s;d=s>=0?++l:--l){for(u={cells:[]},g=m=0;6>=m;g=++m)u.cells.push(f[7*d+g]);this.scope.rows.push(u)}for(this.scope.headers=[],t=[],d=o=0;6>=o;d=++o)b=new Date(f[d].year,f[d].month,f[d].day),t.push(this.scope.headers.push(b.format("D")));return t},d.prototype.createItem=function(a,b,c){return{name:c,year:a,month:b,day:c}},d.prototype.getType=function(){return"day"},d.prototype.isSelected=function(a){return this.scope.current.getFullYear()===a.year&&this.scope.current.getMonth()===a.month&&this.scope.current.getDate()===a.day},d.prototype.isCurrent=function(a){return this.scope.now.getFullYear()===a.year&&this.scope.now.getMonth()===a.month&&this.scope.now.getDate()===a.day},d.prototype.select=function(b){return this.scope.current.getMonth()===b.month&&(this.scope.current.setFullYear(b.year),this.scope.current.setMonth(b.month),this.scope.current.setDate(b.day),this.scope.value=this.scope.current.format(this.scope.format),this.scope.isOpen=!1,this.scope.changeUrl)?a.search(this.scope.queryName,this.scope.value):void 0},d.prototype.getItemClasses=function(a){var b;return b=d.__super__.getItemClasses.call(this,a),this.scope.current.getMonth()!==a.month&&b.push("other-month"),b},e=function(){function a(a,b){this.date=a,null==b&&(b=0),this.date=new Date(this.date.getFullYear(),this.date.getMonth()+b,this.date.getDate()),this.daysCount=new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate(),this.firstDayMonth=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay(),this.lastDayMonth=new Date(this.date.getFullYear(),this.date.getMonth(),this.daysCount).getDay()}return a}(),d}(c),h={year:f,month:e,day:d},{scope:{current:"=?",type:"@",queryName:"@",changeUrl:"=?",changeUrlOnStart:"=?",startDay:"=?",headerMonthFormat:"@",headerYearFormat:"@",iconLeft:"@",iconRight:"@",format:"@",label:"@",lblClass:"@"},restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/datepicker/datepicker.html",controller:function(b){var c;return b.page=0,b.isOpen=!1,b.value=null,b.now=new Date,null==b.type&&(b.type="day"),null==b.startDay&&(b.startDay=1),null==b.changeUrl&&(b.changeUrl=!1),null==b.changeUrlOnStart&&(b.changeUrlOnStart=!1),null==b.queryName&&(b.queryName="datepicker"),null==b.headerMonthFormat&&(b.headerMonthFormat="F"),null==b.headerYearFormat&&(b.headerYearFormat="Y"),null==b.iconLeft&&(b.iconLeft="glyphicon glyphicon-chevron-left"),null==b.iconRight&&(b.iconRight="glyphicon glyphicon-chevron-right"),null==b.format&&(b.format="Y-m-d"),null!=b.current?(b.current="string"==typeof b.current?new Date(b.current):void 0,b.value=b.current.format(b.format)):(c=a.search(),null!=c[b.queryName]&&c[b.queryName].length?(b.current=new Date(c[b.queryName]),b.value=b.current.format(b.format)):b.current=new Date(b.now.getFullYear(),b.now.getMonth(),b.now.getDate())),b.open=function(){return b.isOpen=!0},b.selectMonth=function(){return g(new e,b)},b.selectYear=function(){return b.page=0,g(new f,b)},h[b.type]?g(new h[b.type],b):void 0}}}]),a.module("ngCoreElementDropdown",[]).directive("coreDropdown",["$location","$rootScope","$timeout",function(a,b,c){return{scope:{items:"=",selected:"=?",name:"@",queryName:"@",label:"@",lblClass:"@",selectEvent:"@",changeUrl:"=?",changeUrlOnStart:"=?",wrpClass:"@",btnClass:"@",hasAny:"=?",anyName:"@",align:"@"},restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/dropdown/dropdown.html",controller:function(d){var e,f,g,h;return e="__ANY__",d.isOpen=!1,null==d.changeUrl&&(d.changeUrl=!1),null==d.changeUrlOnStart&&(d.changeUrlOnStart=!1),null==d.queryName&&(d.queryName="dropdown"),null==d.selectEvent&&(d.selectEvent="dropdown.select"),null==d.hasAny&&(d.hasAny=!1),null==d.anyName&&(d.anyName="Любой"),null==d.align&&(d.align="left"),d.open=function(){return d.isOpen=d.isOpen?!1:!0},d.select=function(c){return d.isOpen=!1,d.selected=c,b.$broadcast(d.selectEvent,d.selected),d.changeUrl===!0&&d.changeUrlOnStart===!0&&c.id!==e&&a.search(d.queryName,d.selected.id),d.changeUrl===!0&&d.changeUrlOnStart===!0&&c.id===e?a.search(d.queryName,null):void 0},d.selectById=function(a){var b,c,e,f;e=d.items,f=[];for(b in e)c=e[b],f.push(c.id===a?d.select(c):void 0);return f},d.$watch("items",function(a,b){return a!==b?h():void 0}),d.$watch("selected",function(a,b){return a!==b&&d.selected?d.select(d.selected):void 0}),f=function(){return null!=d.items},g=function(){var b;return b=a.search(),null!=d.selected?d.select(d.selected):null!=d.queryName&&null!=b[d.queryName]?d.selectById(parseInt(b[d.queryName])):d.select(d.items[0]),f()?d.changeUrlOnStart=!0:void 0},h=function(){return d.hasAny?c(function(){return d.items.unshift({id:e,name:d.anyName}),g()}):g()},f()?h():void 0}}}]),a.module("ngCoreElementForm",[]).directive("coreForm",["$window","$service",function(a,b){return{scope:{service:"@",cleanAfterSend:"=?",successRedirect:"@",successEvent:"@",beforeSendEvent:"@",sendEvent:"@",receiveEvent:"@",errorEvent:"@"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/form/form.html",controller:function(c){var d,e;if(null==c.service)throw new Error("service should be defined");return null==c.cleanAfterSend&&(c.cleanAfterSend=!0),null==c.successEvent&&(c.successEvent="form.success"),null==c.sendEvent&&(c.sendEvent="form.send"),null==c.receiveEvent&&(c.receiveEvent="form.receive"),null==c.errorEvent&&(c.errorEvent="form.error"),c.cleanAfterSendEvent="form.clean",c.error=null,d={},d[c.successEvent]={},d[c.sendEvent]={},d[c.receiveEvent]={},d[c.errorEvent]={},d[c.cleanAfterSendEvent]={},e=function(a,b){var c,e,f,g;f=d[a],g=[];for(c in f)e=f[c],g.push(e(b));return g},this.addListener=function(a,b,c){return null==d[a][b]?d[a][b]=c:void 0},this.getSuccessEvent=function(){return c.successEvent},this.getSendEvent=function(){return c.sendEvent},this.getReceiveEvent=function(){return c.receiveEvent},this.getErrorEvent=function(){return c.errorEvent},this.getCleanAfterSendEvent=function(){return c.cleanAfterSendEvent},this.send=function(){var d;return d={},e(c.sendEvent,d),c.$emit(c.sendEvent,d),b.getByPath(c.service)(d,function(b){var d,f,g;if(e(c.receiveEvent,b),c.$emit(c.receiveEvent,b),b.success===!0){if(e(c.successEvent,b),c.$emit(c.successEvent,b),c.cleanAfterSend===!0&&c.$broadcast(c.cleanAfterSendEvent,b),null!=c.successRedirect)return a.location.href=c.successRedirect}else if(c.$emit(c.errorEvent,b),null!=b.message&&(c.error=b.message),null!=b.messages)return e(c.errorEvent,b),f=function(){var a,c;a=b.messages,c=[];for(g in a)d=a[g],c.push("<div class="+g+">"+d.message+"</div>");return c}(),c.error=f.join("")})}},link:function(a,b,c,d){return b.bind("submit",function(a){return a.preventDefault(),d.send()})}}}]).directive("coreInput",[function(){return{scope:{type:"@",name:"@",value:"=?",label:"@",lblClass:"@",placeholder:"@",wrpClass:"@"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-input.html":"/angular-core-elements/src/form/input.html"},link:function(b,c,d,e){var f,g;return null==b.type&&(b.type="text"),f=a.element(c[0].querySelector("input")),g=f.parent(),e.addListener(e.getSendEvent(),b.name,function(a){if(f&&b.name)if(g.removeClass("has-error"),"checkbox"===b.type||"radio"===b.type){if(f.val())return a[f.attr("name")]=f.val()}else if(f.val())return a[f.attr("name")]=f.val()}),b.$on(e.getErrorEvent(),function(a,c){return c.messages[b.name]?g.addClass("has-error"):void 0}),b.$on(e.getCleanAfterSendEvent(),function(){return"text"===b.type?f.val(""):void 0})}}}]).directive("coreHiddenInput",[function(){return{scope:{name:"@",value:"=?"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:"/angular-core-elements/src/form/hidden-input.html",link:function(a,b,c,d){if(null==a.name)throw new Error("name should be defined");return d.addListener(d.getSendEvent(),a.name,function(b){return a.value?b[a.name]=a.value:void 0})}}}]).directive("coreSubmit",[function(){return{scope:{btnClass:"@",wrpClass:"@"},require:"^coreForm",restrict:"E",replace:!0,transclude:!0,templateUrl:function(a){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-submit.html":"/angular-core-elements/src/form/submit.html"},link:function(b,c,d,e){var f;return null==b.btnClass&&(b.btnClass="btn-success"),f=a.element(c[0].querySelector("button")),e.addListener(e.getSendEvent(),"submit",function(){return f.addClass("disabled")}),e.addListener(e.getReceiveEvent(),"submit",function(){return f.removeClass("disabled")[0].blur()})}}}]).directive("coreSelect",[function(){return{scope:{name:"@",label:"@",lblClass:"@",wrpClass:"@",items:"=",selected:"=?",selectedId:"=?",anyName:"@"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-select.html":"/angular-core-elements/src/form/select.html"},link:function(a,b,c,d){var e;if(null==a.name)throw new Error("name should be defined");return a.selectEvent=a.name+".dropdown.select",null==a.anyName&&(a.anyName="Выбрать"),e=0,a.$watch("selected",function(b){return null!=b?a.$$childHead.select(a.selected):void 0}),a.$watch("selectedId",function(b){return null!=b?a.$$childHead.selectById(a.selectedId):void 0}),a.$on(a.selectEvent,function(a,b){return e=null!=b?b.id:void 0}),d.addListener(d.getSendEvent(),a.name,function(b){return b[a.name]=e})}}}]).directive("coreTextarea",[function(){return{scope:{name:"@",value:"=?",label:"@",lblClass:"@",placeholder:"@",wrpClass:"@",rows:"=?",cols:"=?"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-textarea.html":"/angular-core-elements/src/form/textarea.html"},link:function(b,c,d,e){var f,g;if(null==b.name)throw new Error("name should be defined");return g=a.element(c[0].querySelector("textarea")),f=g.parent(),e.addListener(e.getSendEvent(),b.name,function(a){return a[b.name]=g.val()}),e.addListener(e.getErrorEvent(),b.name,function(a){return a.messages[b.name]?f.addClass("has-error"):void 0}),e.addListener(e.getCleanAfterSendEvent(),b.name,function(){return g.val("")})}}}]).directive("coreCheckbox",[function(){return{scope:{name:"@",value:"=?",label:"@",lblClass:"@",placeholder:"@",wrpClass:"@",checked:"=?"},require:"^coreForm",restrict:"E",replace:!0,templateUrl:function(a){return a.parent().hasClass("form-horizontal")?"/angular-core-elements/src/form/wrapped-checkbox.html":"/angular-core-elements/src/form/checkbox.html"},link:function(a,b,c,d){if(null==a.name)throw new Error("name should be defined");return d.addListener(d.getSendEvent(),a.name,function(b){return a.checked?b[a.name]=a.value:void 0})}}}]),a.module("ngCoreElementModal",[]).directive("coreModal",["$rootScope",function(){return{scope:{animation:"@",title:"@",autoOpen:"=?",opener:"@",openerEvent:"@",model:"=?"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/modal/modal.html",controller:function(b){return null==b.animation&&(b.animation="fade"),null==b.autoOpen&&(b.autoOpen=!1),b.isOpen=b.autoOpen===!0?!0:!1,null==b.openerEvent&&(b.openerEvent="click"),b.model=this,b.open=this.show=function(){return b.isOpen=!0},b.close=this.hide=function(){return b.isOpen=!1},null!=b.opener&&b.opener.length?a.element(document.querySelector(b.opener)).bind(b.openerEvent,function(){return b.open()}):void 0}}}]),a.module("ngCoreElementPanel",[]).directive("corePanel",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/panel/panel.html"}}]).directive("corePanelHeader",["$timeout","$location","$rootScope",function(a,b,c){return{scope:{hasSearch:"=?",changeUrl:"=?",queryName:"@",delay:"=?",searchEvent:"@",placeholder:"@"},require:"^corePanel",restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/panel/panel-header.html",controller:function(d){var e,f;return d.search=null,null==d.queryName&&(d.queryName="search"),null==d.changeUrl&&(d.changeUrl=!0),null==d.hasSearch&&(d.hasSearch=!1),null==d.delay&&(d.delay=1e3),null==d.searchEvent&&(d.searchEvent="panel.header.search"),e=null,d.$watch("search",function(){return null!=d.search?(null!=e&&a.cancel(e),e=a(function(){return c.$broadcast(d.searchEvent,d.search),d.search.length||(d.search=null),d.changeUrl?(b.search(d.queryName,d.search),b.search("page",null)):void 0},d.delay)):void 0}),d.onSearch=function(a){return d.search=a},f=b.search(),null!=f[d.queryName]?d.search=f[d.queryName]:void 0}}}]),a.module("ngCoreElementTable",[]).directive("coreTable",["$rootScope","$location",function(a,b){return{scope:{pageQueryName:"@",items:"=?",itemsPerPage:"=?",itemsCount:"=?",currentPage:"=?",displayedPages:"=?",changeUrl:"=?",changeUrlOnStart:"=?",itemsNotFound:"@",paginationEvent:"@"},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/table/table.html",controller:function(c,d,e){var f,g;for(c.cells=[],c.cellElements=[],null==c.pageQueryName&&(c.pageQueryName="page"),null==c.paginationEvent&&(c.paginationEvent="page.select"),null==c.itemsPerPage&&(c.itemsPerPage=0),null==c.itemsCount&&(c.itemsCount=0),null==c.currentPage&&(c.currentPage=1),null==c.displayedPages&&(c.displayedPages=5),null==c.changeUrl&&(c.changeUrl=!1),null==c.changeUrl&&(c.changeUrlOnStart=!1),null==c.itemsNotFound&&(c.itemsNotFound="Нет данных для отображения"),f=c,c.$on("pagination",function(a,b){return c.itemsPerPage=b.itemsPerPage,c.itemsCount=b.itemsCount,c.createPages()}),c.selectPage=function(d){return c.currentPage=d,c.createPages(),c.changeUrl===!0&&c.changeUrlOnStart===!0&&b.search(c.pageQueryName,c.currentPage),a.$broadcast(c.paginationEvent,c.currentPage)},c.createPages=function(){var a,b,d,e,f,g,h,i;for(c.pages=[],h=Math.max(1,c.currentPage-Math.abs(Math.floor(c.displayedPages/2))),a=h+c.displayedPages-1,i=Math.ceil(c.itemsCount/c.itemsPerPage),a>i&&(a=i,h=Math.max(1,a-c.displayedPages+1)),h>a&&(a=h),g=[],b=d=e=h,f=a;f>=e?f>=d:d>=f;b=f>=e?++d:--d)g.push(c.pages.push(b));return g},this.add=function(a){return c.cells.push(a)},this.getCollectionName=function(){return e.items},this.getParentScope=function(){return f};null!==f&&!f.hasOwnProperty(this.getCollectionName());)f=f.$parent;return g=b.search(),null!=g[c.pageQueryName]&&(c.currentPage=parseInt(g[c.pageQueryName])),c.itemsCount&&c.itemsPerPage&&c.selectPage(c.currentPage),c.changeUrlOnStart=!0,f.$watch(this.getCollectionName(),function(a){return function(b,d,e){return null!=e[a.getCollectionName()]&&c.items!==e[a.getCollectionName()]?c.items=e[a.getCollectionName()]:void 0}}(this),!0)}}}]).directive("coreCol",[function(){return{scope:{name:"@","class":"@"},restrict:"E",require:"^coreTable",compile:function(a){var b;return b=a.html(),function(a,c,d,e){return a.content=b,e.add(a)}}}}]).directive("coreCell",["compileCell",function(a){return{restrict:"A",require:"^coreTable",replace:!0,link:function(b,c,d,e){return a(c,b.cell.content,e.getCollectionName()+"["+b.$parent.i+"]",e.getParentScope())}}}]).directive("coreDetails",[function(){return{scope:{item:"="},restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular-core-elements/src/table/details.html",controller:function(a,b,c){var d,e;for(a.rows=[],d=a,this.add=function(b){return a.rows.push(b)},this.getCollectionName=function(){return c.item},this.getParentScope=function(){return d},e=[];null!==d&&!d.hasOwnProperty(this.getCollectionName());)e.push(d=d.$parent);return e}}}]).directive("coreRow",[function(){return{scope:{name:"@","class":"@"},restrict:"E",require:"^coreDetails",compile:function(a){var b;return b=a.html(),function(a,c,d,e){return a.content=b,e.add(a)}}}}]).directive("coreCompileRow",["compileCell",function(a){return{restrict:"A",require:"^coreDetails",link:function(b,c,d,e){return a(c,b.row.content,e.getCollectionName(),e.getParentScope())}}}]).factory("compileCell",["$compile",function(a){return function(b,c,d,e){var f;return f=new RegExp("item(?!s)","g"),b.append(c.replace(f,d)),a(b.contents())(e)}}])}(window.angular);